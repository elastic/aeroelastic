!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.ultradom={})}(this,function(e){"use strict";function g(e,n){var t={};for(var r in e)t[r]=e[r];for(var r in n)t[r]=n[r];return t}function u(e){return e.currentTarget.events[e.type](e)}function y(e,n,t,r,l){if("key"===n);else if("style"===n)for(var o in g(r,t)){var i=null==t||null==t[o]?"":t[o];"-"===o[0]?e[n].setProperty(o,i):e[n][o]=i}else"o"===n[0]&&"n"===n[1]?(e.events||(e.events={}),(e.events[n=n.slice(2)]=t)?r||e.addEventListener(n,u):e.removeEventListener(n,u)):n in e&&"list"!==n&&!l?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n)}function b(e,n,t){function r(){e.removeChild(function e(n,t){var r=t.attributes;if(r){for(var l=0;l<t.children.length;l++)e(n.childNodes[l],t.children[l]);r.ondestroy&&r.ondestroy(n)}return n}(n,t))}var l=t.attributes&&t.attributes.onremove;l?l(n,r):r()}function k(e){return e?e.key:null}function w(e,n,t,r,l,o){if(r===t);else if(null==t||t.name!==r.name){var i=function e(n,t,r){var l="string"==typeof n||"number"==typeof n?document.createTextNode(n):(r=r||"svg"===n.name)?document.createElementNS("http://www.w3.org/2000/svg",n.name):document.createElement(n.name),o=n.attributes;if(o){o.oncreate&&t.push(function(){o.oncreate(l)});for(var i=0;i<n.children.length;i++)l.appendChild(e(n.children[i],t,r));for(var u in o)y(l,u,o[u],null,r)}return l}(r,l,o);e.insertBefore(i,n),null!=t&&b(e,n,t),n=i}else if(null==t.name)n.nodeValue=r;else{!function(e,n,t,r,l){for(var o in g(n,t))t[o]!==("value"===o||"checked"===o?e[o]:n[o])&&y(e,o,t[o],n[o],l);t.onupdate&&r.push(function(){t.onupdate(e,n)})}(n,t.attributes,r.attributes,l,o=o||"svg"===r.name);for(var u={},f={},a=[],s=t.children,c=r.children,d=0;d<s.length;d++){a[d]=n.childNodes[d],null!=(h=k(s[d]))&&(u[h]=[a[d],s[d]])}d=0;for(var v=0;v<c.length;){var h=k(s[d]),p=k(c[v]);if(f[h])d++;else if(null==p||p!==k(s[d+1]))if(null==p||t.recycled)null==h&&(w(n,a[d],s[d],c[v],l,o),v++),d++;else{var m=u[p]||[];h===p?(w(n,m[0],m[1],c[v],l,o),d++):m[0]?w(n,n.insertBefore(m[0],a[d]),m[1],c[v],l,o):w(n,a[d],null,c[v],l,o),f[p]=c[v],v++}else null==h&&b(n,a[d],s[d]),d++}for(;d<s.length;)null==k(s[d])&&b(n,a[d],s[d]),d++;for(var d in u)f[d]||b(n,u[d][0],u[d][1])}return n}e.h=function(e,n){for(var t=[],r=[],l=arguments.length;2<l--;)t.push(arguments[l]);for(;t.length;){var o=t.pop();if(o&&o.pop)for(l=o.length;l--;)t.push(o[l]);else null!=o&&!0!==o&&!1!==o&&r.push(o)}return{name:e,attributes:n||{},children:r,key:n&&n.key}},e.render=function(e,n){var t=[],r=n.children[0];for(w(n,r,r&&r.node,e,t).node=e;t.length;)t.pop()()}});